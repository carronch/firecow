---
import { getEntry } from 'astro:content';

const homepageData = await getEntry('homepage', 'settings');
const homepage = homepageData?.data;

const rawGalleryImages = homepage?.galleryImages || [];
// Resolve paths
const galleryImages = rawGalleryImages.map((img: string) => 
    img.startsWith('http') ? img : `/images/gallery/${img}`
);

// Fallback images if no gallery content is created
const fallbackImages = [
  "https://images.unsplash.com/photo-1590523277543-a94d2e4eb00b?w=800&q=80",
  "https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=800&q=80",
  "https://images.unsplash.com/photo-1583212235753-b250a3b5b120?w=800&q=80",
  "https://images.unsplash.com/photo-1621262828626-4b8cc4821867?w=800&q=80"
];

const imagesToDisplay = galleryImages.length > 0 ? galleryImages : fallbackImages;
---
<section class="py-20 bg-white" id="gallery">
    <div class="container mx-auto px-4">
      <div class="text-center mb-16">
        <span class="text-primary-600 font-semibold tracking-wide uppercase text-sm">Visual Journey</span>
        <h2 class="text-4xl md:text-5xl font-bold font-heading mt-2 mb-4 text-slate-900">Gallery</h2>
        <p class="text-slate-600 text-lg max-w-2xl mx-auto">See the beauty that awaits you.</p>
      </div>
  
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
        {imagesToDisplay.map((img, index) => (
           <div class="aspect-square bg-slate-100 rounded-xl overflow-hidden group relative">
             <img src={img} class="w-full h-full object-cover transition duration-500 group-hover:scale-110" alt={`Gallery Image ${index + 1}`}/>
           </div>
        ))}
      </div>
    </div>
  </section>
